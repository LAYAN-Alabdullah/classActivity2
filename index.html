<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diriyah</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* أيقونة المرشد السياحي */
        #ai-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #8b5a2b;
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            z-index: 999;
        }
        /* نافذة الكتابة */
        #ai-popup {
            display: none;
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 280px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            padding: 10px;
            z-index: 1000;
            text-align: right;
        }
        #ai-popup textarea {
            width: 100%;
            border-radius: 5px;
            padding: 5px;
            border: 1px solid #ccc;
            font-family: 'Tajawal', sans-serif;
        }
        #ai-popup button {
            margin-top: 5px;
            width: 100%;
            background-color: #8b5a2b;
            color: white;
            border: none;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
        }
        #ai-popup button:hover {
            background-color: #704621;
        }
        #ai-response {
            margin-top: 8px;
            font-size: 14px;
            white-space: pre-line;
        }
    </style>
</head>
<body>

    <header>
        <h1>الدرعية جوهرة المملكة</h1>
    </header>

    <section class="image">
        <img src="https://media.istockphoto.com/id/1963259178/photo/diriyah-illuminated-old-town-walls-at-turaif-district-complex-at-night-riyadh-saudi-arabia.jpg?b=1&s=612x612&w=0&k=20&c=q7MwY43lklkPLvK2BMx4lZo2tlJzWBqaHnDQVdk3l-0=" alt="الدرعية">
    </section>

    <section class="about">
        <h2>نبذة عن الدرعية</h2>
        <p>الدرعية هي العاصمة التاريخية الأولى للمملكة العربية السعودية، تقع شمال غرب الرياض. تعد مهد الدولة السعودية الأولى، وتحتوي على مواقع تاريخية عريقة مثل حي الطريف، الذي أُدرج في قائمة اليونسكو للتراث العالمي.</p>
    </section>

    <section class="tourist-spots">
        <h2>أبرز المعالم السياحية</h2>
        <ul>
            <li>
                <strong>حي الطريف</strong>
                <p>يشتهر بعماراته التقليدية وأزقته الضيقة، وهو موقع مسجل ضمن قائمة اليونسكو للتراث العالمي لما يحمله من تاريخ عريق وتراث نجدي أصيل.</p>
            </li>
            <li>
                <strong>وادي حنيفة</strong>
                <p>يمتاز بجماله الطبيعي الخلاب ومناظره الطبيعية الساحرة، مما يجعله مكانًا مثاليًا للنزهات والاستجمام.</p>
            </li>
            <li>
                <strong>متحف الدرعية</strong>
                <p>يعرض تاريخ الدولة السعودية الأولى من خلال مجموعات أثرية ونادرة تحكي قصة تأسيس المملكة والعادات والتقاليد في تلك الحقبة.</p>
            </li>
            <li>
                <strong>بوابة الدرعية</strong>
                <p>تُعد مدخلاً تاريخيًا للمدينة وتبرز بفخامتها المعمارية، مما يعكس الدور الحيوي الذي لعبته الدرعية كمركز تجاري وثقافي.</p>
            </li>
        </ul>
    </section>

    <section class="additional-info">
        <h2>معلومات إضافية</h2>
        <p>تشتهر الدرعية بعاداتها النجدية الأصيلة، مثل القهوة السعودية وحسن الضيافة. كما أن تاريخها يعود للقرن الـ15، وكانت مركزًا تجاريًا وثقافيًا هامًا في الجزيرة العربية.</p>
    </section>

    <section class="video">
        <h2>فيديو عن ثقافة الدرعية</h2>
        <p>فيديو يعرض الدرعية، تاريخها، وأهم معالمها الثقافية والسياحية.</p>
        <div>
            <iframe src="https://www.youtube.com/embed/z_THy2FptGo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </section>

    <footer>
        <p> الدرعية ترحب بكم  </p>
    </footer>

    <!-- أيقونة المرشد السياحي -->
    <div id="ai-icon">🗺️</div>

    <!-- نافذة الحوار -->
    <div id="ai-popup">
        <textarea id="user-question" placeholder="اكتب سؤالك..." rows="2"></textarea>
        <button id="send-question">إرسال</button>
        <div id="ai-response"></div>
    </div>

    <script>
        document.getElementById("ai-icon").addEventListener("click", () => {
            const popup = document.getElementById("ai-popup");
            popup.style.display = popup.style.display === "none" ? "block" : "none";
        });

        document.getElementById("send-question").addEventListener("click", async () => {
            const question = document.getElementById("user-question").value.trim();
            if (!question) return alert("الرجاء كتابة سؤال أولاً");

            document.getElementById("ai-response").textContent = "⏳ جاري المعالجة...";

            try {
                const res = await fetch("/api/tour-guide", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ question })
                });

                if (!res.ok) throw new Error(`خطأ: ${res.status}`);
                const data = await res.json();

                document.getElementById("ai-response").textContent = data.answer || "لم يصل رد.";
            } catch (err) {
                console.error(err);
                document.getElementById("ai-response").textContent = "⚠️ حدث خطأ أثناء الاتصال بالذكاء الاصطناعي.";
            }
        });
    </script>

</body>
</html>
